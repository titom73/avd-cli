!
no enable password
no aaa root
!
username admin privilege 15 role network-admin nopassword
username admin ssh-key ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCc9Fn0YN2MCogG2+cpWfZN8EMbL201WyMHI9v4uha0w6njm6OZmRQ/QJSz+hnNTkyj9pVTmFi7m039tCo4lezS/y6mQ5QZcylKiydQ2oGB6pzK6EpKEFj+1n+RvcKMkPUiVkgx/LgllaRG8+qFx96tXVkZOj/w17eVZzs6FvM9xwEENERCFEdh4fqVOb/mr7zVWjzDS8OWucSF6RuNWSW27OUzPp6QV0gGxytu4REfQbfitdy9HNaBtwU3dsf/LbcCtl1PAfVLM42ECMTq5La1nkW2P7NrVc5txDb+9uO1c2F9vfDOyMNnpLEBeStSb361yhbI4nOEcFs+amXMdM27
username cvpadmin privilege 15 role network-admin secret sha512 $6$ooEp/G.yX9vdztxG$wUMEwkP4fRixKm0nFmy5HQ7ktuYJ3gazABnRHqsq9Z6teGFl7h22r4sXxT0L5hfvil2zNQZCfkXooYPJPXwqK.
username cvpadmin ssh-key ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCc9Fn0YN2MCogG2+cpWfZN8EMbL201WyMHI9v4uha0w6njm6OZmRQ/QJSz+hnNTkyj9pVTmFi7m039tCo4lezS/y6mQ5QZcylKiydQ2oGB6pzK6EpKEFj+1n+RvcKMkPUiVkgx/LgllaRG8+qFx96tXVkZOj/w17eVZzs6FvM9xwEENERCFEdh4fqVOb/mr7zVWjzDS8OWucSF6RuNWSW27OUzPp6QV0gGxytu4REfQbfitdy9HNaBtwU3dsf/LbcCtl1PAfVLM42ECMTq5La1nkW2P7NrVc5txDb+9uO1c2F9vfDOyMNnpLEBeStSb361yhbI4nOEcFs+amXMdM27
username demo privilege 15 role network-admin secret sha512 $6$ooEp/G.yX9vdztxG$wUMEwkP4fRixKm0nFmy5HQ7ktuYJ3gazABnRHqsq9Z6teGFl7h22r4sXxT0L5hfvil2zNQZCfkXooYPJPXwqK.
username demo ssh-key ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCc9Fn0YN2MCogG2+cpWfZN8EMbL201WyMHI9v4uha0w6njm6OZmRQ/QJSz+hnNTkyj9pVTmFi7m039tCo4lezS/y6mQ5QZcylKiydQ2oGB6pzK6EpKEFj+1n+RvcKMkPUiVkgx/LgllaRG8+qFx96tXVkZOj/w17eVZzs6FvM9xwEENERCFEdh4fqVOb/mr7zVWjzDS8OWucSF6RuNWSW27OUzPp6QV0gGxytu4REfQbfitdy9HNaBtwU3dsf/LbcCtl1PAfVLM42ECMTq5La1nkW2P7NrVc5txDb+9uO1c2F9vfDOyMNnpLEBeStSb361yhbI4nOEcFs+amXMdM27
!
alias ale show ip hardware ale routes unprogrammed
alias ale6 show ipv6 hardware ale routes unprogrammed
alias cc clear counters
alias fabric show platform fap fabric rates mbps
alias fib show ip hardware fib routes | grep bgp | wc -l
alias fib6 show ipv6 hardware fib routes | grep bgp | wc -l
alias l3 show platform sand l3 summary
alias route6sum show ipv6 route summary
alias routesum show ip route summary
alias senz show interface counter error | nz
alias shmc show int | awk '/^[A-Z]/ { intf = $1 } /, address is/ { print intf, $6 }'
alias snz show interface counter | nz
alias spd show port-channel %1 detail all
alias sli show lacp interface Ethernet %1 detailed
alias sqnz show interface counter queue | nz
alias srnz show interface counter rate | nz
alias summary show bgp summary
alias summary6 show ipv6 bgp summary

!
daemon TerminAttr
   exec /usr/bin/TerminAttr -cvaddr=192.168.0.5:9910 -cvauth=token,/tmp/token -cvvrf=MGMT -smashexcludes=ale,flexCounter,hardware,kni,pulse,strata -taillogs -cvsourceintf=Management1
   no shutdown
!
vlan internal order ascending range 1006 1199
!
transceiver qsfp default-mode 4x10G
!
interface defaults
   mtu 1500
!
service routing protocols model multi-agent
!
logging repeat-messages
logging console critical
logging vrf MGMT host 192.168.0.201
logging source-interface Management1
!
hostname spine01
ip domain lookup vrf MGMT source-interface Management1
ip name-server vrf MGMT 1.1.1.1
ip name-server vrf MGMT 8.8.8.8
dns domain arista.atd
!
spanning-tree mode mstp
no spanning-tree vlan-id 4093-4094
spanning-tree mst 0 priority 4096
!
clock timezone Europe/Paris
!
vlan 100
   name campus-users
!
vlan 300
   name campus-voice
!
vlan 666
   name GARBAGE_USERS
!
vlan 667
   name GARBAGE_PHONES
!
vlan 4093
   name MLAG_L3_VRF_default
   trunk group MLAG
!
vlan 4094
   name MLAG
   trunk group MLAG
!
vrf instance MGMT
!
management api http-commands
   protocol https
   no shutdown
   !
   vrf MGMT
      no shutdown
!
aaa authentication policy local allow-nopassword-remote-login
!
interface Port-Channel1
   description L2_IDF1_Port-Channel55
   no shutdown
   switchport trunk allowed vlan 100,300,666-667
   switchport mode trunk
   switchport
   mlag 1
!
interface Port-Channel2
   description L2_leaf-2a_Port-Channel55
   no shutdown
   switchport trunk allowed vlan 100,300,666-667
   switchport mode trunk
   switchport
   mlag 2
!
interface Port-Channel3
   description L2_IDF3_AGG_Port-Channel55
   no shutdown
   switchport trunk allowed vlan 100,300,666-667
   switchport mode trunk
   switchport
   mlag 3
!
interface Port-Channel47
   description MLAG_spine02_Port-Channel47
   no shutdown
   switchport mode trunk
   switchport trunk group MLAG
   switchport
!
interface Ethernet1
   description L2_leaf-1a_Ethernet55
   no shutdown
   channel-group 1 mode active
!
interface Ethernet2
   description L2_leaf-2a_Ethernet55
   no shutdown
   channel-group 2 mode active
!
interface Ethernet3
   description L2_leaf-3a_Ethernet55
   no shutdown
   channel-group 3 mode active
!
interface Ethernet4
   description L2_leaf-3b_Ethernet55
   no shutdown
   channel-group 3 mode active
!
interface Ethernet47
   description MLAG_spine02_Ethernet47
   no shutdown
   channel-group 47 mode active
!
interface Ethernet48
   description MLAG_spine02_Ethernet48
   no shutdown
   channel-group 47 mode active
!
interface Loopback0
   description ROUTER_ID
   no shutdown
   ip address 172.16.1.1/32
!
interface Management1
   description OOB_MANAGEMENT
   no shutdown
   vrf MGMT
   ip address 192.168.0.12/24
!
interface Vlan100
   description campus-users
   no shutdown
   ip address 10.1.10.2/23
   ip virtual-router address 10.1.10.1
!
interface Vlan300
   description campus-voice
   no shutdown
   ip address 10.2.10.2/23
   ip virtual-router address 10.2.10.1
!
interface Vlan666
   description GARBAGE_USERS
   no shutdown
   ip address 10.3.10.2/23
   ip virtual-router address 10.3.10.1
!
interface Vlan667
   description GARBAGE_PHONES
   no shutdown
   ip address 10.4.10.2/23
   ip virtual-router address 10.4.10.1
!
interface Vlan4093
   description MLAG_L3_VRF_default
   no shutdown
   mtu 9214
   vrf default
   ip address 10.255.254.0/31
!
interface Vlan4094
   description MLAG
   no shutdown
   mtu 1500
   no autostate
   ip address 10.255.255.0/31
!
mac address-table aging-time 300
!
ip virtual-router mac-address 00:1c:73:00:dc:01
!
ip routing
no ip routing vrf MGMT
!
ip prefix-list PL-MLAG-PEER-VRFS
   seq 10 permit 10.255.254.0/31
!
mlag configuration
   domain-id CAMPUS_SPINES
   local-interface Vlan4094
   peer-address 10.255.255.1
   peer-link Port-Channel47
   reload-delay mlag 300
   reload-delay non-mlag 330
!
ntp local-interface vrf MGMT Management1
ntp server vrf MGMT 45.90.162.253 prefer burst iburst local-interface Management1
ntp server vrf MGMT 54.38.114.34 burst iburst local-interface Management1
!
route-map RM-CONN-2-BGP-VRFS deny 10
   match ip address prefix-list PL-MLAG-PEER-VRFS
!
route-map RM-CONN-2-BGP-VRFS permit 20
!
router bfd
   multihop interval 1200 min-rx 1200 multiplier 3
!
end
